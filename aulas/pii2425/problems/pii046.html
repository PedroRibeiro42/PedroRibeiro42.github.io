<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>[PII046] How You Doin', Bomb?</title>
    <style>
      .function {
          color: black;
          background: #ffe2e2;
          margin: 2px;
          padding: 2px;
          border: 1px dashed black;
      }
    </style>
  </head>

<body bgcolor="white">

<p><small>In what concerns the continuous evaluation solving exercises grade during the semester, you should </small><b><span style="color:green">submit until 23:59 of April 14th</span></b><br>
  <small><i>(this exercise will still be available for submission after that deadline, but without couting towards your grade)</i><br>
    <b>[to understand the context of this problem, you should read the <a target="_blank" href="https://www.dcc.fc.up.pt/~pribeiro/aulas/pii2425/practical/class06.html">class #06 exercise sheet</a>]</b></small></p>

<hr>

<p style="color:red"><b>In this problem you should submit a <u>complete program with the main function</u>, reading with functions such as scanf and printing with functions such as printf.</b></p>

<h2>[PII046] How You Doin', Bomb?</h2>

<p><img src="pii046.png" align="right" width="250">
  Joey Tribbiani just discovered Minesweeper, but he has no idea how it works. All he knows is that he has to click somewhere, and he really hopes nothing explodes. To help him, you need to <b>simulate what happens when he makes his first move on the board</b>.</p>

<p>The figures below illustrate an example minesweeper game on a 9 by 9 grid:</p>

<table>
  <tr>
    <td><img src="pii046_bombs.png"></td>
    <td>&nbsp; &nbsp;</td>
    <td><img src="pii046_unknown.png"></td>
    <td>&nbsp; &nbsp;</td>
    <td><img src="pii046_firstmove.png"></td>
  </tr>
  <tr>
    <td align="center">The (initially secret)<br>position of the bombs</td>
    <td></td>
    <td align="center">Initial grid (player doesn't<br>know where the bombs are)</td>
    <td></td>
    <td align="center">What the players sees<br>after a first move<br>on the yellow cell</td>
  </tr>
</table>

<p>The Minesweeper rules:</p>

<ol>
  <li><b>Grid:</b> The minefield is a rectangular grid where each cell is either:
    <ul>
      <li>A bomb (<span class="code">B</span>) representing a hidden trap, or
      <li>An empty space (<span class="code">.</span>) representing safe ground.
    </ul>  
  <li><b>First Move:</b>
    <ul>
      <li>Joey makes the first move by choosing a cell <i>(y, x)</i> on the grid.
      <li>If the cell contains a bomb (<span class="code">B</span>), reveal only that cell (as it detonates).
      <li>If the cell is empty (<span class="code">.</span>), reveal the number of bombs in adjacent cells (horizontal, vertical, and diagonal).
      <li>If the cell has no adjacent bombs, reveal all connected safe cells recursively.
    </ul>
  <li><b>Output:</b>
    <ul>
      <li>Revealed cells show:
        <ul>
          <li>A bomb (<span class="code">B</span>) if there was a bomb on that position, or
          <li>The number of adjacent bombs (e.g., 1, 2, etc.), or
          <li>An empty space (<span class="code">.</span>) if there are no adjacent bombs.
        </ul>
      <li>Unrevealed cells remain hidden and should be shown as <span class="code">?</span>
    </ul>
</ol>

  
<h3>The Problem</h3>

<p>Write a program that, given the location of the bombs and the coordinates of the first move, produces the output of that first move.</p>

<h3>Input</h3>

<p>The first line contains two positive integers: the number of rows <b>R</b> and columns <b>C</b> that determine the size of the grid.</p>

<p>This is followed by <b>R</b> lines of characters representing the bombs location. Empty cells are represented by '.' and bomb cells by 'B'.</p>

<p>The last line contains two positive integers: the coordinates <i>y</i> and <i>x</i> of the cell selected on the first move (<i>y</i> indicates the row, from 1 to <b>R</b>, where 1 is the top row; <i>x</i> indicates the column, from 1 to <b>C</b> where 1 is the leftmost row).</p>

<h3>Output</h3>

<p>You must print the output of the first move as previously described (check the example outputs).</p>

<h3>Constraints</h3>

<p>The following limits are guaranteed in all the test cases that will be given to your program:</p>

<table>
  <tr>
    <td>1 &le; <b>R,C</b> &le; 1000</td>
    <td>&nbsp; &nbsp; &nbsp;</td>
    <td>Dimensions of the grid</td>
  </tr>  
  <tr>
    <td>1 &le; <i>y</i> &le; <b>R</b></td>
    <td>&nbsp; &nbsp; &nbsp;</td>
    <td>y coordinate (row) of the first move</td>
  </tr>
    <tr>
    <td>1 &le; <i>x</i> &le; <b>C</b></td>
    <td>&nbsp; &nbsp; &nbsp;</td>
    <td>x coordinate (column) of the first move</td>
  </tr>  
</table>

<br>

<table cellspacing="1" cellpadding="4" bgcolor="black" border="0">
  <tr bgcolor="#e2e2e2">
    <td>Example Input 1</td>
    <td>Example Output 1</td>
  </tr>
  <tr bgcolor="white">
    <td valign="top">
<pre>
9 9
B.B....B.
.........
......B.B
.........
.......B.
...B.....
.........
...B.....
...B....B
3 4
</pre>
    </td>
    <td valign="top">
<pre>
???1..1??
1211.12??
.....1???
.....12??
..111.1??
..1?1.111
..2?2....
..2?2..11
..2?2..1?
</pre>

    </td>
  </tr>
</table>

<br>

<table cellspacing="1" cellpadding="4" bgcolor="black" border="0">
  <tr bgcolor="#e2e2e2">
    <td>Example Input 2</td>
    <td>Example Output 2</td>
  </tr>
  <tr bgcolor="white">
    <td valign="top">
<pre>
9 9
B.B....B.
.........
......B.B
.........
.......B.
...B.....
.........
...B.....
...B....B
1 3
</pre>
    </td>
    <td valign="top">
<pre>
??B??????
?????????
?????????
?????????
?????????
?????????
?????????
?????????
?????????
</pre>

    </td>
  </tr>
</table>

<br>

<table cellspacing="1" cellpadding="4" bgcolor="black" border="0">
  <tr bgcolor="#e2e2e2">
    <td>Example Input 3</td>
    <td>Example Output 3</td>
  </tr>
  <tr bgcolor="white">
    <td valign="top">
<pre>
9 9
B.B....B.
.........
......B.B
.........
.......B.
...B.....
.........
...B.....
...B....B
1 4
</pre>
    </td>
    <td valign="top">
<pre>
???1?????
?????????
?????????
?????????
?????????
?????????
?????????
?????????
?????????
</pre>

    </td>
  </tr>
</table>

<hr size="2">
<center><b>Programming II (CCINF1002)</b><br>
  DCC/FCUP - University of Porto
</center>
<hr size="2">

</body></html>
