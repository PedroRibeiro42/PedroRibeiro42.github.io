<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Aula Prática #12 - Fluxos Máximos</title>
	<link rel="StyleSheet" href="praticas.css" type="text/css">
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async
		src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
	</script>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
</head>

<body>
  <h3><a href="../index.html">DAA 2020/2021</a> (CC2001) - DCC/FCUP</h3>
  <h1>Aula Prática #12 - Fluxos Máximos<br>
    <small><small>(semana de 14/12 a 18/12)</small></small>
  </h1>
<hr>

  <h2>Exercícios para submissão</h2>

  <p>Para efeitos da <a href="../avaliacao.html#classificacao">nota atribuída à resolução de exercícios ao longo do semestre</a>, os exercícios a submeter desta aula são:<br>
     
<ul>
  <li><a class="important"  href="../problemas/daa041.html">[DAA 041] Corridas no parque</a> (peso 50%) <span style="color:DarkGreen">(exercício do guião principal)</span>
  <li><a class="important"  href="../problemas/daa042.html">[DAA 042] Clube de livros</a> (peso 50%) <span style="color:DarkGreen">(exercício do guião principal)</span>
</ul>


<p><b>Prazo de submissão:</b> 3 de Janeiro (submeter no <a href="https://mooshak.dcc.fc.up.pt/~daa/">Mooshak de DAA</a>)</p>

  <p><b>Não se esqueçam que qualquer ajuda que tenham recebido de outros colegas deve ser reconhecida nos comentário do programa que submetem.</b><br>Depois do prazo os problemas continuarão disponíveis no Mooshak, mas as submissões não contarão para a sua nota. Relebre que cada aula vale 10% da nota desta componente.<br>
Para um problema contar tem acertar todos os testes. Mesmo que resolva todos os problemas, o máximo numa aula é de 100%.</p>
  
  <hr>
  
 <h3>Conteúdos das teóricas</h3>

  <p>Nesta aula iremos abordar conceitos de <b>Fluxos Máximos</b> em grafos. Será por isso conveniente ver o que foi falado nas teóricas:
    <ul>
      <li><a href="../apoio.html#slides">Slides</a> (capítulo "10 - Grafos: Fluxos Máximos")
      <li><a href="../videos/index.html">Vídeos</a>: (vídeo #23)
    </ul>
  </p>

<hr>

<h3>Exercício 1) Introdução ao algoritmo de Edmonds-Karp </h3>

  <p>Comece por fazer download do código exemplo do algoritmo de Edmonds-Karp (que funciona em tempo \(\mathcal{O}(|V| \times |E|^2)\) <span class="slides">[ver slides 5 a 21]</span>:
    <ul>
      <li><b>C++:</b> <a class="important" href="../codigo/edmondskarp.cpp">edmondskarp.cpp</a> (versão original feita em C++) 
      <li><b>C:</b> <a class="important" href="../codigo/edmondskarp_c.cpp">edmondskarp_c.cpp</a> (adaptação para C/C++ "quase como em C, sem usar classes)
      <li><b>Java:</b> <a class="important" href="../codigo/edmondskarp.java">edmondskarp.java</a> (adaptação para Java) 
    </ul>
</ul>

<p>Se costuma usar C, a sugestão é que use a última versão, que é essencialmente C com excepção do <i>vector</i> e <i>queue</i>, que já estão implementadas em C++ usando STL. A ideia é que progressivamente possa ir começando a usar as estruturas de dados úteis que o C++ tem e o C não, continuando no essencial a programar em C "normal" e usando C++ apenas para essas estruturas de dados.</p>

<ol type="a">
  <li>Compile e execute o código usando como input o ficheiro <a class="important" href="../codigo/edmondskarp.txt">edmondskarp.txt</a>, que corresponde ao grafo da figura seguinte (o mesmo que é usado na explicação de fluxo máximo nos slides):<br>
    <img src="edmondskarp.png"><br>&nbsp;<br>
  <li>Procure compreender todos as linhas do código dado e procure também seguir a execução, vericando se percebe os caminhos de aumento que vão sendo imprimidos, que no final dão origem a um fluxo total de 23 (12+4+7)<br>&nbsp;<br>
    <img width="600" src="edmondskarp_execucao.png"><br>&nbsp;<br>  
</ol>
    
<hr>

<h3>Exercício 2) Resolvendo um problema usando fluxo máximo (<i>edge disjoint paths</i></h3>

<p><a href="https://mooshak.dcc.fc.up.pt/~daa/"><img src="mooshak.gif" border="0"></a><br>
Usando como base o código dado no exercício anterior, implemente e submeta uma solução para o problema <a class="important" href="../problemas/daa041.html">[DAA 041] Corridas no parque</a>.</p>

<p>Dicas:</p>
<ul>
  <li>Para encontrar o máximo número de caminhos entre dois pontos tal que uma mesma aresta não possa aparecer em dois caminhos diferentes (<i>edge disjoint paths</i>) basta pensar no grafo do parque com uma rede de fluxo onde todas as arestas têm capacidade 1. Desse modo o <b>fluxo máximo</b> dá-nos o número máximo de caminhos que não usam as mesmas arestas (pois a sua capacidade apenas "deixa passar" um caminho) <span class="slides">[ver slide 24]</span>.
  <li>Tendo em conta os limites baixos no número de nós e de arestas, pode usar (quase) qualquer algoritmo, mas aqui sugerimos o Edmonds-Karp (com BFS), para o qual já tem uma implementação base. Tenha cuidado com o facto do grafo neste problema ser não dirigido (ao passo que a implementação base assume um grafo dirigido - o que tem de mudar?). 
</ul>

<hr>

<h3>Exercício 2) Resolvendo um problema usando fluxo máximo (<i>maximum bipartite matching</i></h3>

<p><a href="https://mooshak.dcc.fc.up.pt/~daa/"><img src="mooshak.gif" border="0"></a><br>
Implemente e submeta uma solução para o problema <a class="important" href="../problemas/daa042.html">[DAA 042] Clube de livros</a>.</p>

<p>Dicas:</p>
<ul>
  <li>Podemos representar as declarações de interesse por um <b>grafo bipartido</b> onde de um lado estão os membros do clube e do outro lado estão os livros.</li>
  <li>Criamos uma super-origem e um super-destino <span class="slides">[ver slides 25 a 27]</span, colocamos todas as arestas com peso 1 e agora basta-nos encontrar o <b>fluxo máximo</b>.</li>
  <li>Se o fluxo máximo for igual ao número de membros, então temos um emparelhamento perfeito e a resposta é YES. Caso contrário a resposta é NO.
  <li>Sugerimos usar como base a implementação dada, sendo que o problema passa quase a ser unicamente criar o grafo que representa o problema:<br>&nbsp;<br>
    <img width="500" src="livros.png"><br>&nbsp;<br>  
    
</ul>

<hr>

<h3>Material complementar</h3>

<p>Vamos ficar pelos <a href="https://www.google.com/search?q=what+is+the+meaning+of+life+the+universe+and+everything">42</a> problemas para submissão no Mooshak :) [e por isso nesta aula não existem problemas complementares]</p>

<p>Se quiser complementar o seu conhecimento sobre fluxos máximos com material que não foi falado na teórica (nem será alvo de avaliação no teste) pode espreitar por exemplo:

  <ul>
    <li>O <a href="https://en.wikipedia.org/wiki/Dinic%27s_algorithm">algoritmo de Dinic</a>, que corre em \(\mathcal{O}(|E| \times |V|^2)\), o que é melhor que \(\mathcal{O}(|V| \times |E|^2)\) do Edmonds-Karp (ver exemplo <a href="https://cp-algorithms.com/graph/dinic.html">implementação</a> [ou <a href="https://cp-algorithms-brasil.com/grafos/fluxo4.html">português</a>]).
    <li>O <a href="https://en.wikipedia.org/wiki/Hopcroft%E2%80%93Karp_algorithm">algoritmo de Hopcraft-Karp</a> que funciona para o caso muito específico da <i>maximum bipartite matching</i>, onde os pesos são 1, e por isso corre em \(\mathcal{O}(|E|\sqrt{|V|})\).
    <li>A relação entre um corte mínimo (partição do grafo em duas partições disconexas usando arestas de peso mínimo) e o fluxo máximo: <a href="https://en.wikipedia.org/wiki/Max-flow_min-cut_theorem">max-flow min-cut theorem</a>
  </ul>
  
<p>Isto serve também para relembrar que apesar de termos coberto muito material nesta unidade curricular, ainda há muitas coisas para aprenderem!</p>

<hr>

<h3>Exercício de Desafio</h3>
  
<p><img align="left" height="100" src="xmas.png">O exercício de desafio desta semana é um pouco diferente e com um espírito mais natalício. <b>O objectivo é imprimir uma árvore de natal usando o menor programa possível!</b>. A sua pontuação é igual ao tamanho do seu programa (quantidade de bytes): quanto menor melhor!</p>

<p>O prémio para as 5 melhores soluções no final do dia 3 de Janeiro (1 dia antes do exame) é um lanche no Alicantina pago por mim, Pedro Ribeiro (mais companhia para pequena conversa sobre algoritmos - possivelmente não todos ao mesmo tempo por causa do distanciamento)</p>

<p>Este desafio está disponível para submissão no <a href="https://mooshak.dcc.fc.up.pt/~daa/">Mooshak</a> (têm de usar C, C++ ou Java):</p>

<p><li class="big"><a class="important" href="../problemas/xmas.html">[DAA XMAS] Árvore de Natal</a></p>

<p><b>Bom Natal e Feliz Ano Novo para todos!</b> </p>

<hr>
<p class="footer">Pedro Ribeiro (DCC/FCUP) / Última actualização: <b><script language="Javascript">document.write(document.lastModified )</script></p>
</body>

</html>
