<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>[DAA 042] Clube de livros</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body bgcolor="white">

<p><small>Para efeitos da nota atribuida à resolução de exercícios ao longo do semestre - </small><b><span style="color:green">Submeter até 23:59 de 3 de Janeiro</span></b><br>
<small><i>(o problema continuará depois disponível para submissão, mas sem contar para a nota)</i></small></p>

<hr>

<h1><font color="blue">[DAA 042] Clube de livros</font><br>
<small><small><small>(este problema é essencialmente uma
tradução/adaptação de um problem do SWERC'2014)</small></small></small></h1>

<p><img align="right" src="daa042.jpg"> Todos os membros do clube de
livros do Porto estão a ferver de excitação com o evento anual de
trocas de livros! Todos os anos, cada membro traz o seu livro favorito
e tentam descobrir um outro livro que seja de um outro membro disposto a trocar com eles.</p>

<p>O Aniceto já esteve nessa troca de livros antes e definitivamente não
quer perder o evento este ano, mas ele acha que o processo de trocas pode
ser melhorado. No passado, pares de membros interessados nos livros um
do outro simplesmente trocavam: se a pessoa A trazia um livro que a
pessoa B gostava, e vice-versa, então A e B trocavam os seus livros.</p>

<p>Foi aí que percebeu que muitos membros ficavam com o mesmo livro
com que entravam... Se ao invés de procurarmos por pares,
procurarmos por tripletes de membros, poderiamos descobrir mais
trocas válidas!  Imagina que o membro A apenas gosta do livro de B,
enquanto que B apenas gosta do livro de C e que C gosta do livro de
A. Estas 3 pessoas podiam trocar os livros num ciclo e todos ficariam
contentes!</p>

<p>Mas porquê parar em apenas 3 pessoas? Os ciclos podem ser cada vez
maiores! Podes ajudar-me a descobrir se é possível que todos saiam com
um novo livro? Tem cuidado, porque os membros não irão dar o seu livro
para troca sem receber um outro livro que gostem de volta.</p>

<h2><font color="blue">O Problema</font></h2>

<p>Dados os membros de um clube de livros e os livros que eles gostam,
consegues descobrir uma maneira de todos receberem um livro que gostem?</p>

<h2><font color="blue">Input</font></h2>

<p>O input contém vários casos de teste, sendo que na primeira linha do input vem um inteiro <b>C</b> indicando quantos casos se seguem.</p>

<p>Cada caso de teste começa com uma linha indicando <b>N</b>, o
número de pessoas. A segunda linha de cada caso contém <b>M</b>, o
número total de "declarações de interesse". Seguem-se <b>M</b> linhas,
cada uma com dois inteiros A e B indicando que o membro A gosta do
livro que o membro B trouxe (<i>0 &le; A,B &lt; N</i>, ou seja, os
membros são numerados de 0 a <b>N-1</b>). Os números A e B nunca são
iguais (um membro nunca gosta do livro que ele próprio trouxe).</p>

<h2><font color="blue">Output</font></h2>

<p>Uma linha para cada caso de teste, na mesma ordem em que aparecem no input, contendo <tt>YES</tt> se podemos encontrar um livro para cada membro e <tt>NO</tt> caso contrário.</p>


<p>São garantidos os seguintes limites em todos os casos de teste que
  irão ser colocados ao programa:</p>

<table>
  <tr>
    <td>1 &le; <b>C</b> &le; 5</td>
    <td>&nbsp; &nbsp; </td>
    <td>Número de casos de teste</td>
  </tr>
  <tr>
    <td>2 &le; <b>N</b> &le; 1&nbsp;000</td>
    <td>&nbsp; &nbsp; </td>
    <td>Número de pessoas</td>
  </tr>
  <tr>
    <td>1 &le; <b>M</b> &le; 10&nbsp;000</td>
    <td>&nbsp; &nbsp; </td>
    <td>Número de declarações de interesse</td>
</tr>
</table>

<h2><font color="blue">Exemplo de Input</font></h2>
<pre>
2
5
5
0 1
1 2
2 3
3 4
4 2
9
9
0 1
1 2
2 0
3 4
4 3
5 6
6 7
7 8
8 5
</pre>

<h2><font color="blue">Exemplo de Output</font></h2>
<pre>
NO
YES
</pre>

<hr>

<p align="center">
Desenho e Análise de Algoritmos (CC2001)<br>
DCC/FCUP - Faculdade de Ciências da Universidade do Porto
</p>

<hr>

</body>
</html>
